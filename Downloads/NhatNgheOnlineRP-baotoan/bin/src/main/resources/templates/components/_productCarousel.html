<div th:fragment="productCarousel(title, products)">
    <div th:with="carouselId=${'carousel-' + title.replaceAll(' ', '-')}">
        <div class="container my-5 bg-white rounded p-3">
            <!-- Tiêu đề và nút điều hướng -->
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h4 class="fw-bold" th:text="${title}">Tiêu đề</h4>
                <div>
                    <button class="btn btn-outline-danger btn-sm me-2"
                            th:attr="data-bs-target='#' + ${carouselId}" data-bs-slide="prev">
                        <i class="bi bi-chevron-left"></i>
                    </button>
                    <button class="btn btn-outline-danger btn-sm"
                            th:attr="data-bs-target='#' + ${carouselId}" data-bs-slide="next">
                        <i class="bi bi-chevron-right"></i>
                    </button>
                </div>
            </div>

            <!-- Carousel -->
            <div class="carousel slide" th:attr="id=${carouselId}" data-bs-ride="carousel" data-bs-interval="3000">
                <div class="carousel-inner">
                    <!-- Slide 1 -->
                    <div class="carousel-item active">
                        <div class="row">
                            <div class="col-md-3" th:each="p, iStat : ${products}" th:if="${iStat.index} < 4">
                                <a th:href="@{'/product/detail/' + ${p.productID}}" class="text-decoration-none text-dark">
                                    <div class="card h-100 border shadow-sm">
                                        <img th:src="@{'/images/products/' + ${p.imageURL}}" class="card-img-top p-3" alt="Ảnh">
                                        <div class="card-body">
                                            <h6 class="card-title text-truncate-2" th:text="${p.productName}">Tên sản phẩm</h6>
                                            <p class="text-danger fw-semibold"
                                               th:text="${#numbers.formatDecimal(p.price, 0, 'COMMA', 0, 'POINT')} + '₫'">Giá</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Slide 2 -->
                    <div class="carousel-item" th:if="${products.size()} > 4">
                        <div class="row">
                            <div class="col-md-3" th:each="p, iStat : ${products}" th:if="${iStat.index} >= 4">
                                <a href="/product/detail/1" class="text-decoration-none text-dark">
                                    <div class="card h-100 border shadow-sm">
                                        <img th:src="@{'/images/products/' + ${p.imageURL}}" class="card-img-top p-3" alt="Ảnh">
                                        <div class="card-body">
                                            <h6 class="card-title text-truncate-2" th:text="${p.productName}">Tên sản phẩm</h6>
                                            <p class="text-danger fw-semibold"
                                               th:text="${#numbers.formatDecimal(p.price, 0, 'COMMA', 0, 'POINT')} + '₫'">Giá</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- (Thêm slide thứ 3 nếu cần) -->
                </div>
            </div>
        </div>
    </div>
</div>




<script>
  function scrollCarousel(direction) {
    const container = document.getElementById('carouselInner');
    const itemWidth = container.querySelector('div').offsetWidth;
    container.scrollLeft += direction * itemWidth;
  }

  // Tự động nhích mỗi 3 giây
  setInterval(() => scrollCarousel(1), 3000);
</script>

<style>
#carouselContainer .btn {
	z-index: 2;
}
</style>


<style>
.text-truncate-2 {
	overflow: hidden;
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
}
</style>